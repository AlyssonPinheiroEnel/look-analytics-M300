<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Filtragem de Produtividade</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <i class="fas fa-chart-line logo-icon"></i>
                    <div>
                        <h1 class="app-title">Sistema de Filtragem de Produtividade</h1>
                        <p class="app-subtitle">Análise automática de dados - Última atualização: <span id="lastUpdate">Carregando...</span></p>
                    </div>
                </div>
                <div class="header-stats">
                    <div class="stat-card">
                        <i class="fas fa-file-csv stat-icon"></i>
                        <div>
                            <span class="stat-value" id="csvFileName">-</span>
                            <span class="stat-label">Arquivo CSV</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-users stat-icon"></i>
                        <div>
                            <span class="stat-value" id="filteredTeams">0</span>
                            <span class="stat-label">Filtradas</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <main class="app-main">
            <section class="info-section card">
                <div class="info-content">
                    <div class="info-item">
                        <i class="fas fa-info-circle info-icon"></i>
                        <div>
                            <h3>Como funciona:</h3>
                            <p>O sistema carrega automaticamente o arquivo CSV da pasta <code>/data/</code>.</p>
                            <p>Para atualizar os dados, basta fazer push de um novo arquivo CSV para o GitHub.</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-sync-alt info-icon"></i>
                        <div>
                            <h3>Auto-atualização:</h3>
                            <p>Última verificação: <span id="lastCheck">-</span></p>
                            <button id="refreshBtn" class="btn btn-primary btn-sm">
                                <i class="fas fa-redo"></i> Verificar Atualizações
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="filters-section card">
                <h2 class="section-title">
                    <i class="fas fa-filter"></i>
                    Condições de Filtragem
                    <span class="filter-toggle" id="toggleAllFilters">
                        <i class="fas fa-toggle-on"></i> Todos
                    </span>
                </h2>
                <div class="filters-grid" id="filtersContainer">
                    <!-- Filtros serão gerados dinamicamente -->
                </div>
            </section>

            <section class="results-section">
                <div class="summary-card card">
                    <h3 class="summary-title">
                        <i class="fas fa-chart-pie"></i>
                        Resumo da Análise
                    </h3>
                    <div class="summary-content" id="summaryContent">
                        <div class="loading-state">
                            <div class="spinner small"></div>
                            <p>Carregando dados do CSV...</p>
                        </div>
                    </div>
                </div>

                <div class="table-container card">
                    <div class="table-header">
                        <h3 class="table-title">
                            <i class="fas fa-table"></i>
                            Resultados Filtrados
                            <span class="badge" id="resultsCount">0 resultados</span>
                        </h3>
                        <div class="table-actions">
                            <button id="toggleViewBtn" class="btn btn-outline btn-sm">
                                <i class="fas fa-th-large"></i>
                                Cards
                            </button>
                        </div>
                    </div>
                    
                    <div class="loading-overlay" id="loadingOverlay">
                        <div class="spinner"></div>
                        <p>Processando dados...</p>
                    </div>
                    
                    <div class="data-message" id="dataMessage">
                        <!-- Mensagens de status serão exibidas aqui -->
                    </div>
                    
                    <div class="table-view" id="tableView">
                        <div class="table-wrapper">
                            <table id="dataTable">
                                <thead>
                                    <tr>
                                        <th>Equipe</th>
                                        <th>Login</th>
                                        <th>Início Calendário</th>
                                        <th>Ação</th>
                                        <th>Status Desloc</th>
                                        <th>1º Login</th>
                                        <th>1º Desp</th>
                                        <th>1º Desl</th>
                                    </tr>
                                </thead>
                                <tbody id="tableBody">
                                    <!-- Dados serão inseridos aqui -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="cards-view" id="cardsView" style="display: none;">
                        <div class="cards-grid" id="cardsContainer">
                            <!-- Cards serão gerados aqui -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="app-footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p><i class="fas fa-info-circle"></i> Sistema de Análise de Produtividade v2.0</p>
                    <p class="footer-hint">Atualização automática via GitHub - Para atualizar os dados, faça push de um novo CSV</p>
                </div>
                <div class="footer-legend">
                    <div class="legend-item">
                        <span class="legend-color action"></span>
                        <span>Ação ≠ "-"</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color desp"></span>
                        <span>1º Desp > 10</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color desl"></span>
                        <span>1º Desl > 25</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color login"></span>
                        <span>1º Login > 5</span>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Modal para detalhes -->
    <div id="errorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Informação do Sistema</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p id="errorMessage"></p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="closeErrorModal">OK</button>
            </div>
        </div>
    </div>

    <script src="js/csvLoader.js"></script>
    <script src="js/dataFilter.js"></script>
    <script src="js/uiManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>